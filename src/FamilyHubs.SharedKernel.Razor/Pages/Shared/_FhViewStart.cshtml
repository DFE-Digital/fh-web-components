@using FamilyHubs.SharedKernel.Razor.AlternativeServices
@using FamilyHubs.SharedKernel.Razor.FamilyHubsUi
@using FamilyHubs.SharedKernel.Razor.FamilyHubsUi.Extensions
@using Microsoft.Extensions.Options
@inject FamilyHubsLayoutModel FamilyHubsLayoutModel
@model (Microsoft.AspNetCore.Mvc.RazorPages.PageModel pageModel, ViewDataDictionary<Microsoft.AspNetCore.Mvc.RazorPages.PageModel> viewData)
@{
    FamilyHubsLayoutModel.PageModel = Model.pageModel;
    var alt = FamilyHubsLayoutModel.PageModel as IAlternativeService;
    if (alt?.ServiceName != null)
    {
        var altFamilyHubsUiOptions = FamilyHubsLayoutModel.FamilyHubsUiOptions.Value.AlternativeFamilyHubsUi[alt.ServiceName];
        if (altFamilyHubsUiOptions.Enabled)
        {
            FamilyHubsLayoutModel.FamilyHubsUiOptions = Options.Create(altFamilyHubsUiOptions);
        }
    }
    Model.viewData.SetFamilyHubsLayoutModel(FamilyHubsLayoutModel);
}