@using FamilyHubs.SharedKernel.Razor.AlternativeServices
@using FamilyHubs.SharedKernel.Razor.FamilyHubsUi
@using Microsoft.Extensions.Options
@* we could use IOptionsSnapshot for updates without downtime, but we probably don't want the overhead for something so central*@
@inject FamilyHubsLayoutModel FamilyHubsLayoutModel
@{
    Layout = "_Layout";

    FamilyHubsLayoutModel.PageModel = Model as Microsoft.AspNetCore.Mvc.RazorPages.PageModel;
    var alt = FamilyHubsLayoutModel.PageModel as IAlternativeService;
    if (alt?.ServiceName != null)
    {
        var altOptions = Options.Create(FamilyHubsLayoutModel.FamilyHubsUiOptions.Value.AlternativeFamilyHubsUi[alt.ServiceName]);
        FamilyHubsLayoutModel.FamilyHubsUiOptions = altOptions;
    }
    ViewData["FamilyHubsLayoutModel"] = FamilyHubsLayoutModel;
}